{% extends 'base.html.twig' %}

{% block title %}Annonce index{% endblock %}

{% block body %}
<!-- Search Start -->
<form method="GET" action="{{ path('app_annonce_search') }}">
<div class="container-fluid bg-primary mb-5 wow fadeIn" data-wow-delay="0.1s" style="padding: 35px;">
    <div class="container">
        <div class="row g-2">
            <div class="col-md-10">
                <div class="row g-2">
                    <div class="col-md-4">
                        <input type="text" name="motcle" class="form-control border-0 py-3" placeholder="Search Keyword" >
                    </div>
                    <div class="col-md-4">
                        <select class="form-select border-0 py-3" name="categorie">
                            <option selected>Categorie</option>
                            {% for Categorie in Categories %}
                                <option value="{{ Categorie.id }}">{{ Categorie.nom }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4">
                        <select class="form-select border-0 py-3" name="pays">
                            <option selected>Pays</option>
                            {% for annonce in Annonces %}
                                <option value="{{ annonce.adresse.pays }}">{{ annonce.adresse.pays }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4">
                        <select class="form-select border-0 py-3" name="capacite">
                            <option selected>capacite</option>
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
				<button type="submit" class="btn btn-dark border-0 w-100 py-3">Résultats</button>
				<boutton class="btn btn-dark border-0 w-100 py-3"><a href="{{ path('app_annonce_index') }}">Reset</a></boutton>
            </div>
        </div>
    </div>
</div>
<!-- Search End -->

		
	<!-- Category Start -->

	<div class="container-xxl py-5">
    <div class="container">
        <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
            <h1 class="mb-3">Types de propriétés</h1>
            <p>Découvrez différents types de propriétés pour trouver celle qui correspond parfaitement à vos besoins.</p>
        </div>
        <div class="row g-4">
            {% for Categorie in Categories %}
            <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.{{ loop.index }}s">
                <a class="cat-item d-block bg-light text-center rounded p-3" href="{{ path('app_annonce_categorie', {'id': Categorie.id}) }}">
                    <div class="rounded p-4">
                        <div class="icon mb-3">
                            <img class="img-fluid" src="{{ asset('uploads/categories/' ~ Categorie.icon) }}" alt="Icon">
                        </div>
                        <h6>{{ Categorie.nom }}</h6>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
	<!-- Category End -->
	<!-- Property List Start -->
	<div class="container-xxl py-5">
		<div class="container">
			<div class="row g-0 gx-5 align-items-end">
				<div class="col-lg-6">
					<div class="text-start mx-auto mb-5 wow slideInLeft" data-wow-delay="0.1s">
						<h1 class="mb-3">Liste de propriétés</h1>
						<p>Explorez notre sélection variée de listes de propriétés pour trouver celle qui correspond le mieux à vos besoins et préférences.</p>
					</div>
				</div>
				
			</div>
			<div class="tab-content">
				<div id="tab-1" class="tab-pane fade show p-0 active">
					<div class="row g-4">
        {% for annonce in Annonces %}
            {% set adresse = Adresses[annonce.id] ?? null %}
            {% set image = Images[annonce.id] ?? null %}
            <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="property-item rounded overflow-hidden">
                    <div class="position-relative overflow-hidden">
                        <div class="bg-primary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">
						{% if annonce.etat == 1 %}
							Disponible
						{% elseif annonce.etat == 2 %}
							N
						{% elseif annonce.etat == 3 %}
							Disponible
						{% else %}
							Disponible
						{% endif %}
						</div>
					{% if image %}
						<img src="{{ asset('uploads/images/' ~ image.image) }}" alt="{{image.alt}}" class="img-fluid">
                    {% endif %}
                        <div class="bg-white rounded-top text-primary position-absolute start-0 bottom-0 mx-4 pt-1 px-3">{{ annonce.categorie }}</div>
                    </div>
                    <div class="p-4 pb-0">
                        <h5 class="text-primary mb-3">€{{ annonce.prix }}</h5>
                        <a class="d-block h5 mb-2" href="#">{{ annonce.nom }}</a>
                        {% if adresse %}
                            <p><i class="fa fa-map-marker-alt text-primary me-2"></i>{{ adresse.rue }} {{adresse.codepostal}},{{adresse.ville}},{{adresse.pays}} ({{adresse.complement}})</p>
                        {% endif %}
                    </div>
                    <div class="d-flex border-top">
                        <small class="flex-fill text-center border-end py-2">
                            <i class="fa fa-calendar text-primary me-2"></i>Dispo a partir de {{ annonce.DateDebut|date('d-m-Y') }}</small>
                        <small class="flex-fill text-center border-end py-2">
                            <i class="fa fa-bed text-primary me-2"></i>{{ annonce.capacite }}</small>
                    </div>

                </div>
            </div>
        {% endfor %}
		</div>
{% endblock %}
